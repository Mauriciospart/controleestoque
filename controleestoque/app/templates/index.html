{% extends "base.html" %}

{% block content %}
    <h1>Dashboard</h1>
    <div class="btn-group" role="group" aria-label="Time period">
        <a href="{{ url_for('index', period='7days') }}" class="btn btn-secondary">Last 7 Days</a>
        <a href="{{ url_for('index', period='30days') }}" class="btn btn-secondary">Last 30 Days</a>
        <a href="{{ url_for('index', period='90days') }}" class="btn btn-secondary">Last 90 Days</a>
        <a href="{{ url_for('index', period='all') }}" class="btn btn-secondary">All Time</a>
    </div>
    <hr>
    <h2>Low Stock Products</h2>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Quantity</th>
                <th>Min Quantity</th>
            </tr>
        </thead>
        <tbody>
            {% for product in low_stock_products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.quantity }}</td>
                <td>{{ product.min_quantity }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <h2>Last Requests</h2>
    <table>
        <thead>
            <tr>
                <th>Employee</th>
                <th>Product</th>
                <th>Quantity</th>
                <th>Timestamp</th>
            </tr>
        </thead>
        <tbody>
            {% for request in last_requests %}
            <tr>
                <td>{{ request.employee.name }}</td>
                <td>{{ request.product.name }}</td>
                <td>{{ request.quantity }}</td>
                <td>{{ request.timestamp }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
